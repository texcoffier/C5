<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <link REL="icon" href="favicon.ico">
    <title>C5 : C5 is Compiler Course Class in the Cloud</title>
    <style>
        BODY {
            --body: 50em;
            max-width: var(--body);
            font-family: sans-serif;
            background: #FFF;
            line-height: 1.3em;
        }

        P,
        LI {
            text-align: justify
        }

        LI {
            margin-top: 0.2em;
        }

        H1,
        H2,
        H3 {
            clear: both;
            background: #EEE;
            padding: 0.3em;
            display: block;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            page-break-after: avoid;
        }

        H1 {
            font-size: 165%;
            border: 1px solid #000;
        }

        H2 {
            font-size: 150%;
            border: 1px solid #000;
            page-break-before: always;
        }

        H3 {
            font-size: 120%;
            border-bottom: 1px solid #000;
            margin-left: 0px;
        }

        TABLE {
            border-collapse: collapse;
            border-spacing: 0px;
        }

        TABLE TD {
            border: 1px solid #888;
            vertical-align: top;
        }

        TT,
        PRE {
            background: #FFE;
            border: 1px solid #880;
            font-family: monospace, monospace;
            font-size: 90%;
            overflow: hidden;
        }

        .compilateur {
            background: #DFF
        }

        .cours {
            background: #BFB
        }

        .js {
            background: #DDF
        }

        .serveur {
            background: #FDD
        }

        .executable {
            background: #FEE
        }

        .screenshot {
            position: absolute;
            left: calc(var(--body) + 1em);
            margin-top: -3em;
            page-break-before: avoid;
        }

        .compilers {
            width: 100%
        }

        .compilers TD:nth-child(1) {
            font-weight: bold;
        }

        .compilers TD:nth-child(3) {
            white-space: nowrap;
        }

        TT.link {
            background: #EEE;
            color: #00F;
            border: 0px;
        }

        TT.button {
            background: #FAFAFA;
            border: 2px outset #DDD;
            border-radius: 0.5em;
            padding: 0.1em;
        }

        TT.key {
            background: initial;
            border: 0px;
        }

        TT.key:before {
            content: '❰';
        }

        TT.key:after {
            content: '❱';
        }

        UL {
            page-break-inside: avoid;
        }

        @media print {
            BODY {
                font-size: 80%;
                max-width: 100%
            }

            TD,
            TH {
                font-size: 80%;
            }

            .screenshot {
                position: initial;
                width: 100%;
                margin-top: 0px;
            }
        }
    </style>
</head>

<body>
    <h1><img src="c5.svg" style="height:1em;vertical-align:text-top"> : C5 is Compiler Course Class in the Cloud.</h1>
    <div id="toc"></div>
    <h2>Pourquoi utiliser C5 ?</h2>
    <h3>Empêcher toute tricherie lors des examens sur machine.</h3>
    <img class="screenshot" src="screen-python.svg">
    <ul>
        <li> Tout est fait dans une unique page web facile à surveiller visuellement :
            <ul>
                <li> Sujet de l'examen, éventuellement différent pour chaque étudiant.</li>
                <li> Éditeur de code pour répondre.</li>
                <li> Résultat de compilation.</li>
                <li> Résultat de l'exécution.</li>
            </ul>
        </li>
        <li> Le copier/copier de sources extérieures est impossible.</li>
        <li> Toutes les actions clavier/souris sont mémorisées.</li>
        <li> Les surveillants voient un plan des salles surveillées avec :
            <ul>
                <li> Les étudiants placés sur les chaises.</li>
                <li> Leur avancement dans les exercices.</li>
                <li> Le nombre de fois qu'ils ont changé de fenêtre.</li>
                <li> En cliquant sur l'étudiant il peut voir son travail,
                    le noter suivant un barème et l'annoter.
                </li>
            </ul>
        </li>
    </ul>
    <h3>Avoir un environnement TP immédiatement fonctionnel.</h3>
    <p>
        En effet :
    </p>
    <ul>
        <li> Rien besoin d'installer pour les étudiants.</li>
        <li> L'étudiant peut accéder à son travail de n'importe où, même sur smartphone.</li>
        <li> Pas besoin d'apprendre à utiliser un logiciel.</li>
        <li> Coloration syntaxique.</li>
        <li> Mise en évidence des parenthèses.</li>
        <li> Mise en évidence des erreurs de compilation.</li>
        <li> Reformatage du code source.</li>
        <li> Recompilation et exécution temps-réel.</li>
        <li> Indices contextuels pour guider l'étudiant vers la solution
            en fonction de son travail.</li>
        <li> Outils pour la surveillance d'examen sur de nombreuses salles.</li>
        <li> Permet de suivre l'avancement du travail de l'étudiant à distance.</li>
    </ul>

    <h3>Fluidifier le déroulement des examens.</h3>
    <img class="screenshot" src="screen-checkpoint.png" style="width: 40em">

    <ul>
        <li> Le fait de placer les étudiants sur les chaises
            revient à faire l'appel.</li>
        <li> On voit immédiatement les noms des surveillants associés aux salles.</li>
        <li> On voit les machines qui sont en panne.</li>
        <li> On voit dans quelles salles il reste des machines inoccupées.</li>
        <li> Les surveillants peuvent s'échanger des messages d'alerte.</li>
        <li> Le surveillant peut voir l'historique du travail de l'étudiant,
            pendant et après la session.
        </li>
        <li> On peut retrouver qui surveillait un étudiant.</li>
        <li> On peut retrouver qui était assis à coté de qui.</li>
        <li> En fin d'examen, pas besoin de demander aux étudiants de déposer un fichier.</li>
        <li> Les tiers-temps sont automatiquement pris en compte.</li>
        <li> On peut donner du temps supplémentaire à un étudiant en cas de problème.</li>
        <li> Un outil permet de noter et commenter facilement le travail de l'étudiant.</li>
        <li> On peut lister par correcteur les étudiants qui n'ont pas été corrigés
            ou bien corrigé de manière incomplète.</li>
        <li> On peut faire le retour de la corrections aux étudiants.</li>
    </ul>
    <p>
        La copie d'écran montre
        <a href="#surveillant">l'interface du surveillant</a>
        qui est présentée plus loin.
    </p>

    <!--
    <p>
        Présentation video de 5 minutes 32 (complètement dépassée) :
        <b><a href="tuto_student.webm">la vue étudiant</a></b><br>
    </p>

    <p> Présentation video de 4 minutes 14 (complètement dépassée) :
        <b><a href="tuto_teacher.webm">la vue surveillant</a></b><br>
    </p>
    -->

    <h2>Création d'une session de travail.</h2>

    <h3>Comment définir un sujet.</h3>
    <p>
        L'ensemble de l'environnement est programmé en Python.
    </p>
    <ul>
        <li> Vous composez votre sujet dans un fichier <tt>nom_sujet.py</tt>,
            ce nom sera affiché aux étudiants,
            il est conseillé de le préfixer par le code du cours
            suivi de «_».
        <li>
            Chaque sujet contient un ensemble de questions s'enchaînant successivement.
    </ul>

    <p>
        Pour chaque question il y a une classe
        dont les méthodes définissent la question.
        Voici les méthodes dans l'ordre d'appel lorsque l'étudiant arrive sur la question :
    </p>
    <ul>
        <li> <tt>default_answer(self)</tt>
            calcule le code initial avec lequel l'étudiant commence dans l'éditeur.
            Si la question est aléatoire, on peut conserver dans l'instance
            de la question l'aléa choisi pour que les méthodes suivantes
            puissent l'utiliser pour l'affichage et les tests.
            <b>Cette fonction est appelée une unique fois.</b>
        </li>
        <li> <tt>question(self)</tt> calcule le texte de la question au format HTML.
        </li>
        <li> <tt>tester(self)</tt> affiche des indices pour aider l'étudiant
            dans la zone «Les buts que vous devez atteindre» de l'interface étudiant.
            Elle autorise le passage à la question suivante
            si la réponse de l'étudiant est correcte.
        </li>
    </ul>
    </p>
    <pre>class Q1(Question):
    """Question 1"""
    def question(self):
        return "&lt;p&gt;Vous devez faire afficher «Bonjour»&lt;/p&gt;"
    def tester(self):
        self.display('&lt;p&gt;Dans votre code source on devrait trouver :&lt;/p&gt;')
        self.check(self.worker.source, [
            ['print'  , 'Le nom de la fonction «print» pour afficher la valeur'],
            ['Bonjour', 'Le texte «Bonjour» que vous devez afficher'],
            ])
        if self.worker.execution_result == 'Bonjour\n':
            self.next_question()
    def default_answer(self):
        return "# Tapez votre programme ici :\n"</pre>
    <p>
        Un sujet complet est une liste de questions gérées
        par un unique compilateur.
        La dernière ligne du fichier définie la liste des questions,
        si elle n'est pas indiquée alors toutes les questions du fichier
        sont proposées à l'étudiant :
    </p>
    <pre>Session([Q0(), Q1(), Q2(), Q3(), QEnd()])</pre>

    <h3>Essayer le sujet.</h3>
    <p>
        On suppose que :
    </p>
    <ul>
        <li> Vous avez accès à un serveur C5.<br>
            Si ce n'est pas le cas, les explications pour en installer
            un sont plus loin sur la page.</li>
        <li> L'administrateur C5 vous a indiqué comme «auteur».</li>
    </ul>
    <p>
        Pour le mettre en production <b>la première fois</b> et l'essayer :
    </p>
    <ul>
        <li> Vous allez sur la page d'accueil de C5.</li>
        <li> En bas de la page, vous cliquez sur le bon compilateur
            et déposez votre fichier contenant le cours.
        </li>
        <li> Une ligne représentant votre cours a été ajoutée
        </li>
        <li> Vous cliquez sur le bouton <tt class="link">Try</tt>.</li>
        <li> Si votre sujet dépend de la place de l'étudiant, alors
            vous devez cliquer sur <tt class="link">Place</tt> pour vous
            placer sur la bonne chaise et recharger la page contenant le sujet.
        </li>
    </ul>

    <h3>Modifier le sujet et paramétrer la session.</h3>
    <img class="screenshot" src="screen-session-editor.svg">
    <ul>
        <li> Sur la page d'accueil de C5, vous cliquez sur <tt class="link">Edit</tt>.</li>
        <li> Vous pouvez alors régler tous les paramètres de la session.</li>
        <li> Si vous voulez déposer une nouvelle version du sujet vous choisissez
            <tt class="button">Upload a new source</tt> dans le menu déroulant
            «Actions» à droite des onglets.
        </li>
        <li> Si vous voulez modifier directement le code source, allez dans l'onglet «Source»
            et faites <tt class="key">Ctrl+S</tt> pour mettre en production.
        </li>
    </ul>
    <p>
        Ensuite il ne reste qu'à aller dans l'onglet «Try» pour voir la nouvelle version.
    </p>


    <h3>Ajouter des images dans un sujet.</h3>
    <p>
        Dans le paramétrage de la session, choisissez <tt class="button">Upload a new media</tt>
        dans le menu «Actions».
        Cela vous affichera en haut de page
        le code HTML à mettre dans la question pour afficher l'image.
        Les images sont partagées entre les différentes sessions C5.
        Par contre une fois que la session ayant enregistrée l'image est terminée,
        l'image n'est plus accessible par les autres sessions.
        Les correcteurs ont bien entendu accès aux images même quand la session
        est terminée.
    </p>
    <p>
        On peut aussi héberger l'image sur un autre site web.
        Le tag IMG doit alors contenir <tt>crossorigin</tt>
        et l'autre site web doit contenir dans le <tt>.htaccess</tt>
        du répertoire de l'image :
    </p>
    <pre>Header set Access-Control-Allow-Origin "https://c5.univ-lyon1.fr"</pre>
    Remplacez par l'adresse de votre serveur C5 et ne mettez PAS le '/' final.

    <!--
    <ul>
        <li> Graphique SVG : on peut directement mettre le code SVG dans le HTML
            de la question.</li>
        <li> Image PNG, transformez l'image <tt>image.png</tt> en HTML avec cette commande shell :
            <pre>echo "&lt;img src=\"data:image/png;base64,$(openssl enc -base64 -A &lt;<b>image.png</b>)\"&gt;"</pre>
        </li>
    </ul>
-->

    <h2>Outils pour définir une question.</h2>

    <h3>Attributs de la question.</h3>
    <ul>
        <li> <tt>self.worker.execution_result</tt> chaîne de caractères
            contenant le résultat de l'exécution
            une fois toutes les lectures clavier (scanf, input, cin...) faites.</li>
        <li> <tt>self.worker.source</tt> chaîne de caractères
            contenant le code source de l'étudiant.</li>
        <li> <tt>self.all_tests_are_fine</tt> vrai au début de la fonction
            <tt>tester</tt>, puis mis à jour automatiquement
            par les fonctions utilitaires en cas d'échec.
        </li>
    </ul>

    <h3>Méthodes et fonctions utilitaires.</h3>
    <ul>
        <li> <tt>millisec()</tt> depuis le 1 janvier 1970.</li>
        <li> <tt>self.display(html)</tt> affiche dans la zone de test.</li>
        <li> <tt>self.worker.escape(text)</tt> échappe les balises HTML.</li>
        <li> <tt>self.next_question()</tt> autorise le passage à la question suivante.</li>
        <li> <tt>self.message(bool, message)</tt>
            affiche le message vert si <tt>bool</tt> est vrai, sinon rouge.</li>
        <li> <tt>self.check(text, [ [regexp, message], ...])</tt>
            affiche les messages vert/rouge en fonction de la présence
            de <tt>regexp</tt> dans <tt>text</tt>.
        </li>
        <li> <tt>self.teacher()</tt> retourne le nom de l'enseignant qui surveille l'étudiant.</li>
        <li> <tt>batiment, coord_x, coord_y = self.placement()</tt>
            Permet de récupérer le bâtiment et les coordonnées sur le plan.
        <li> <tt>sujet = self.version()</tt>
            permet de récupérer la version du sujet suivant que
            l'étudiant a été mis sur un Ⓐ ou Ⓑ sur le plan :
            <pre>def question(self):
    if self.sujet == 'a':
        return "Vous avez le sujet A : ..."
    else:
        return "Vous avez le sujet B : ..."

def tester(self):
    if self.sujet == 'a':
        ...
    else:
        ...

def default_answer(self):
    self.sujet = self.version() # 'a' ou 'b'
    return ""</pre>
    </ul>

    <h3>Tous les attributs de configuration.</h3>

    <p>
        Les colonnes contiennent le nom de l'attribut,
        sa valeur par défaut et un texte d'explication.
    </p>
    <div START_OPTIONS DO_NOT_EDIT_HERE>
<table>
<tr><th style="background: #FFF" colspan="3">Session options</tr>
<tr><td>start<td><tt>&#x27;2000-01-01 00:00:00&#x27;</tt><td>Start date of the session</tr>
<tr><td>stop<td><tt>&#x27;2100-01-01 00:00:00&#x27;</tt><td>Stop date of the session <div id="invalid_date">START&gt;END</div></tr>
<tr><td>state<td><tt>&#x27;Draft&#x27;</tt><td>
<pre>┏━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━┓
┃ State  ┃    Visible by      ┃    Usable by       ┃
┣━━━━━━━━╋━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━┩
┃Draft   ┃creator admin       │creator admin       │
┣━━━━━━━━╉────────────────────┼────────────────────┤
┃Ready   ┃                    │                    │
┃  before┃all                 │creator admin grader│
┃  while ┃all                 │all if no checkpoint│
┃  after ┃all except students │creator admin grader│
┣━━━━━━━━╉────────────────────┼────────────────────┤
┃Grade   ┃creator admin grader│creator admin grader│
┣━━━━━━━━╉────────────────────┼────────────────────┤
┃Done    ┃creator admin grader│creator admin grader│
┃        ┃Students if allowed │                    │
┃        ┃by admin and grader │                    │
┣━━━━━━━━╉────────────────────┼────────────────────┤
┃Archive ┃creator admin       │creator admin       │
┗━━━━━━━━┹────────────────────┴────────────────────┘</pre></tr>
<tr><td>checkpoint<td>0<td>Requires students to be placed on the map (examination mode)</tr>
<tr><td>allow_copy_paste<td>0<td>Copy/paste allowed (if not allowed students must be in full screen mode)</tr>
<tr><td>save_unlock<td>0<td>Saving a question unlock next</tr>
<tr><td>automatic_compilation<td>1<td>Compilation is automatic</tr>
<tr><td>feedback<td>0<td>Maximum level of student feedback allowed to teachers</tr>
<tr><td>grading_done<td>1<td>Graders indicate «grading done» in place of the grading level</tr>
<tr><td>allow_ip_change<td>0<td>Allow IP change (bad Internet connection)</tr>
<tr><td>sequential<td>1<td>Questions must be answered from first to last</tr>
<tr><td>highlight<td><tt>&#x27;#FFF&#x27;</tt><td>Background color in the student and teacher session list</tr>
<tr><th style="background: #FFF" colspan="3">Checkpoint placement interface</tr>
<tr><td>display_student_filter<td>0<td>Display an INPUT field containing a list of student IDs to highlight</tr>
<tr><td>display_my_rooms<td>1<td>Add a toggle to display only the rooms I dragged student into</tr>
<tr><td>display_session_name<td>0<td>Display the session name</tr>
<tr><td>default_building<td><tt>&#x27;&#x27;</tt><td>Preselected building name</tr>
<tr><th style="background: #FFF" colspan="3">Student interface</tr>
<tr><td>positions<td><pre>{
  'question': [1, 29, 0, 30, &#x27;#EFEF&#x27;],
  'tester': [1, 29, 30, 70, &#x27;#EFEF&#x27;],
  'editor': [30, 40, 0, 100, &#x27;#FFFF&#x27;],
  'compiler': [70, 30, 0, 30, &#x27;#EEFF&#x27;],
  'executor': [70, 30, 30, 70, &#x27;#EEFF&#x27;],
  'time': [80, 20, 98, 2, &#x27;#0000&#x27;],
  'index': [0, 1, 0, 100, &#x27;#0000&#x27;],
  'editor_title': [0, 0, 0, 0, &#x27;#FFFF&#x27;],
}</pre><td>For each bloc :<br>[Bloc X%, Width%, Y%, Heigth%, background color]</tr>
<tr><td>forget_input<td>0<td>Forget old input values on execution</tr>
<tr><td>coloring<td>1<td>source highlighting is done</tr>
<tr><td>theme<td><tt>&#x27;a11y-light&#x27;</tt><td>Syntaxic coloring theme for source code</tr>
<tr><td>display_local_save<td>0<td>display 'icon_local' to download the current source code</tr>
<tr><td>display_home<td>1<td>display 'icon_home'</tr>
<tr><td>display_local_git<td>1<td>display 'icon_git' to download a repository of all history</tr>
<tr><td>display_local_zip<td>1<td>display 'icon_local' to download a repository of all questions</tr>
<tr><td>display_timer<td>1<td>display the timer</tr>
<tr><td>display_compile_run<td>1<td>display the F9 button</tr>
<tr><td>display_tag<td>1<td>display 'icon_tag'</tr>
<tr><td>display_history<td>1<td>display version history</tr>
<tr><td>display_indent<td>1<td>display the F8 button</tr>
<tr><td>display_line_numbers<td>1<td>display line numbers</tr>
<tr><th style="background: #FFF" colspan="3">Popup messages</tr>
<tr><td>forbiden<td><tt>&quot;Coller du texte copié venant d&#x27;ailleurs n&#x27;est pas autorisé.&quot;</tt><td>Alert</tr>
<tr><td>close<td><tt>&#x27;Voulez-vous vraiment quitter cette page ?&#x27;</tt><td>Alert</tr>
<tr><td>stop_confirm<td><tt>&quot;Vous voulez vraiment terminer l&#x27;examen maintenant ?&quot;</tt><td>Alert</tr>
<tr><td>stop_done<td><tt>&quot;&lt;h1&gt;C&#x27;est fini.&lt;/h1&gt;&quot;</tt><td>Alert</tr>
<tr><td>good<td><pre>[
  &#x27;Bravo !&#x27;,
  &#x27;Excellent !&#x27;,
  &#x27;Super !&#x27;,
  &#x27;Génial !&#x27;,
  &#x27;Vous êtes trop fort !&#x27;,
]</pre><td>Alert on success</tr>
<tr><th style="background: #FFF" colspan="3">Bloc titles</tr>
<tr><td>question_title<td><tt>&#x27;Question&#x27;</tt><td>Bloc title</tr>
<tr><td>tester_title<td><tt>&#x27;Les buts que vous devez atteindre&#x27;</tt><td>Bloc title</tr>
<tr><td>editor_title<td><tt>&#x27;Code source&#x27;</tt><td>Bloc title</tr>
<tr><td>compiler_title<td><tt>&#x27;Compilation&#x27;</tt><td>Bloc title</tr>
<tr><td>executor_title<td><tt>&#x27;Exécution&#x27;</tt><td>Bloc title</tr>
<tr><th style="background: #FFF" colspan="3">Labels of button and toggles</tr>
<tr><td>editor_indent<td><tt>&#x27;Indent(F8)&#x27;</tt><td>Button label</tr>
<tr><td>compiler_title_toggle<td><tt>&#x27;Automatique (F9)&#x27;</tt><td>Button label</tr>
<tr><td>compiler_title_button<td><tt>&#x27;Maintenant ! (F9)&#x27;</tt><td>Toggle label</tr>
<tr><td>executor_title_button<td><tt>&#x27;GO!(F9)&#x27;</tt><td>Button label</tr>
<tr><td>icon_home<td><tt>&#x27;🏠&#x27;</tt><td>Button label</tr>
<tr><td>icon_save<td><tt>&#x27;📩&#x27;</tt><td>Button label</tr>
<tr><td>icon_local<td><tt>&#x27;💾&#x27;</tt><td>Button label</tr>
<tr><td>icon_git<td><tt>&#x27;&lt;b style=&quot;font-size:50%&quot;&gt;GIT&lt;/b&gt;&#x27;</tt><td>Button label</tr>
<tr><td>icon_tag<td><tt>&#x27;TAG&#x27;</tt><td>Button label</tr>
<tr><td>icon_stop<td><tt>&#x27;Terminer&lt;br&gt;Examen&#x27;</tt><td>Button label displayed if checkpoint</tr>
<tr><th style="background: #FFF" colspan="3">Time countdown</tr>
<tr><td>time_running<td><tt>&#x27;Fini dans&#x27;</tt><td>Time message</tr>
<tr><td>time_done<td><tt>&#x27;Fini depuis&#x27;</tt><td>Time message</tr>
<tr><td>time_seconds<td><tt>&#x27; secondes&#x27;</tt><td>Time message</tr>
<tr><td>time_days<td><tt>&#x27; jours&#x27;</tt><td>Time message</tr>
<tr><td>time_d<td><tt>&#x27; j &#x27;</tt><td>Time message</tr>
<tr><td>time_m<td><tt>&#x27; m &#x27;</tt><td>Time message</tr>
<tr><td>time_h<td><tt>&#x27; h &#x27;</tt><td>Time message</tr>
<tr><th style="background: #FFF" colspan="3">Options defined by the compiler used by the course</tr>
<tr><td>compiler<td><tt>&#x27;&#x27;</tt><td>Compiler to use (should not be changed):<br>«g++» «gcc» «racket»</tr>
<tr><td>compile_options<td><pre>[
]</pre><td>Compile options:<br>«-Wall» «-pedantic» «-pthread» «-std=c++11» «-std=c++20»</tr>
<tr><td>ld_options<td><pre>[
]</pre><td>Libraries to link with:<br>«-lm»</tr>
<tr><td>language<td><tt>&#x27;&#x27;</tt><td>Language to use for syntaxic coloring:<br> «cpp» «python» ...</tr>
<tr><td>extension<td><tt>&#x27;&#x27;</tt><td>Source code filename extension for ZIP and GIT: «cpp», «py»...</tr>
<tr><td>filetree_in<td><pre>[
]</pre><td>Initialize file tree [['foo', 'content'], ['BAR/1', 'one']]</tr>
<tr><td>filetree_out<td><pre>[
]</pre><td>File contents to get as ['foo', 'BAR/1']</tr>
<tr><td>allowed<td><pre>[
]</pre><td>
System call always allowed for g++/gcc, no need to specify them:
      clock_gettime close exit exit_group fstat futex lseek
      mmap munmap newfstatat openat read write
<p>
System calls allowable for g++/gcc:
      access arch_prctl brk clock_nanosleep
      clone clone3 execve getpid getrandom gettid madvise mprotect
      pipe pread64 prlimit64 rseq rt_sigaction rt_sigprocmask
      sched_yield set_robust_list set_tid_address tgkill open
</tr>
<tr><th style="background: #FFF" colspan="3">Access tab</tr>
<tr><td>admins<td><tt>&#x27;&#x27;</tt><td>Administrators with all the access rights</tr>
<tr><td>graders<td><tt>&#x27;&#x27;</tt><td>Teachers allowed to try the session, grade and place the students</tr>
<tr><td>proctors<td><tt>&#x27;&#x27;</tt><td>Can only place the students</tr>
<tr><td>expected_students<td><tt>&#x27;&#x27;</tt><td>The login list of expected students, the session is in bold in their session list.</tr>
<tr><td>expected_students_required<td>0<td>Unexpected students do not see the session, but a teacher can send them the link to it</tr>
<tr><td>tt<td><tt>&#x27;&#x27;</tt><td>The logins of student with ⅓ more time</tr>
</table>
    </div END>
    <p>
        Voici comment paramétrer les attributs précédents :
    </p>
    <ul>
        <li>
            En interactif dans l'éditeur de session.
        </li>
        <li>
            En indiquant en début du fichier contenant les questions :
            <pre>COURSE_OPTIONS = { 'allow_copy_paste': 0 }</pre>
            Les attributs indiquées ici sont écrasées par l'éditeur interactif
            de session, mais elles servent à initialiser les valeurs
            par défaut des attributs quand la session est créée.
        </li>
        <li>
            En indiquant dans la méthode <tt>question</tt> les attributs
            désirés pour cette question.
            <pre>self.set_options({ 'allow_copy_paste': 0 }}</pre>
            Les changements indiqués ici sont prioritaires sur
            ceux de l'éditeurs de question.
        </li>
    </ul>

    <h3>Langages supportés</h3>
    <p>
        Il est nécessaire d'avoir un compilateur du langage écrit en JavaScript
        ou bien de déporter la compilation et/ou l'exécution sur le serveur C5 :
    </p>
    <table class="compilers">
        <tr>
            <th> Langage
            <th> Compilateur
            <th> Remarque
            <th> Exemple de cours
        </tr>
        <tr>
            <td> JavaScript
            <td> compile_js.py
            <td> Compilation et exécution nativement<br>
                dans le navigateur web.
            <td> <a target="_blank" href="COMPILE_JS/introduction.py">COMPILE_JS/<br>introduction.py</a>
        </tr>
        <tr>
            <td> Python
            <td> compile_python.py
            <td> Utilise <a target="_blank" href="https://brython.info/">Brython</a>
                pour compiler<br>
                et exécuter dans le navigateur web.
            <td> <a target="_blank" href="COMPILE_PYTHON/introduction.py">COMPILE_PYTHON/<br>introduction.py</a>
        </tr>
        <tr>
            <td> SQL
            <td> compile_sql.py
            <td> Utilise <a target="_blank" href="http://alasql.org/">AlaSQL</a>
                pour compiler<br>
                et exécuter dans le navigateur web.
            <td> <a target="_blank" href="COMPILE_SQL/test.py">COMPILE_SQL/<br>test.py</a>
        </tr>
        <tr>
            <td> C++
            <td> compile_ccp.py
            <td> Utilise <a target="_blank" href="https://github.com/felixhao28/JSCPP">JSCPP</a>
                pour compiler<br>
                et exécuter dans le navigateur web.<br>
                ATTENTION : pas de classe, structure<br>
                ni de passage par référence.
            <td> <a target="_blank" href="COMPILE_CPP/test.py">COMPILE_CPP/<br>test.py</a>
        </tr>
        <tr>
            <td> C++
            <td> compile_remote.py
            <td> Il ne compile pas lui-même<br>
                mais délègue la compilation avec<br>
                <tt>gcc</tt> ou <tt>g++</tt> ainsi que<br>
                l'exécution au serveur web.<br>
                <ul>
                    <li>Supporte <tt>cin</tt>.</li>
                    <li>Possibilité de graphiques<br>
                        interactifs avec <tt>Grapic.h</tt>.</li>
                    <li>Seul les appels systèmes<br>
                        non dangereux sont possibles,<br>
                        pas de problème de sécurité.</li>
                    <li>Temps et espace limité<br>
                        pour la compilation<br>
                        ainsi que l'exécution.</li>
                </ul>
            <td> <a target="_blank" href="COMPILE_REMOTE/test.py">COMPILE_REMOTE/<br>test.py</a>
        </tr>
        <tr>
            <td> Racket
            <td> compile_remote.py
            <td> Le serveur distant peut aussi<br>
                exécuter du LISP dans une<br>
                <em>sandbox</em> d'un processus Racket.
            <td> <a target="_blank" href="COMPILE_REMOTE/racket.py">COMPILE_REMOTE/<br>racket.py</a>
        </tr>
        <tr>
            <td> Lisp
            <td> compile_lisp.py
            <td> Utilise <a target="_blank" href="https://github.com/jcubic/lips">LIPS</a>
                pour compiler<br>
                et exécuter dans le navigateur web.
            <td> <a target="_blank" href="COMPILE_LISP/conway.py">COMPILE_LISP/<br>conway.py</a>
        </tr>
        <tr>
            <td> Texte
            <td> compile_text.py
            <td> Ce compilateur ne fait rien.
            <td> <a target="_blank" href="COMPILE_TEXT/demo.py">COMPILE_TEXT/<br>demo.py</a>
        </tr>
    </table>
    <p>
        Avec <tt>COMPILE_REMOTE</tt> et <tt>COMPILE_LISP</tt>,
        la touche <tt class="key">F8</tt> permet de
        reformater le code source, mais cela casse le <i>undo</i>.
    </p>

    <h2>Pages d'accueil</h2>
    <p>
        Les utilisateurs sont :
    </p>
    <ul>
        <li> Les roots qui définissent la configuration globale de C5.</li>
        <li> Les administrateurs qui peuvent modifier toutes les sessions.</li>
        <li> Les auteurs qui peuvent créer des sessions et définir les administrateurs.</li>
        <li> Les administrateurs de session qui définissent aussi correcteurs et surveillants.</li>
        <li> Les surveillants qui placent les étudiants et gèrent le déroulement.</li>
        <li> Les correcteurs de session qui notent les copies.</li>
        <li> Les étudiants.</li>
    </ul>
    <p>
        La page d'accueil va être différente pour ces différentes catégories de personnes.
    </p>

    <h3>Étudiant.</h3>
    <img class="screenshot" src="screen-student.svg">
    <p>
        L'étudiant voit la liste de toutes les sessions actives.
        Il doit cliquer sur la bonne si l'enseignant ne lui a pas donné
        le lien direct.
    </p>
    <p>
        Si la session n'a pas de salle d'attente on considère qu'elle n'est
        pas en mode examen et que l'étudiant peut directement commencer à travailler.
        Il se retrouve sur la page avec l'éditeur de source
        qui est présenté dans la première copie d'écran tout au début.
    </p>
    <p>
        Si la session possède une salle d'attente, cela affiche :
    </p>
    <pre>Donnez votre nom à l'enseignant pour qu'il vous ouvre l'examen</pre>
    <p>
        Quand l'enseignant a placé l'étudiant sur son plan,
        l'étudiant recharge la page et cela affiche :
    </p>
    <pre>Début dans XXX secondes.</pre>
    <p>
        La page se recharge à la fin du compte à rebour.
    </p>

    <h3>Root C5.</h3>
    <img class="screenshot" src="screen-root.svg">
    <p>
        L'utilisateur root est celui qui possède tous les droits
        de paramétrage sur C5.
    </p>
    <ul>
        <li> Modification de la liste des roots.
            Si aucun utilisateur n'est root alors
            n'importe peut accéder à la page pour pouvoir
            s'indiquer lui-même comme root.
        </li>
        <li> Modification de la liste des administrateurs
            pouvant modifier toutes les sessions
            (les roots sont automatiquement des administrateurs).</li>
        <li> Modification de la liste des créateurs de session
            (les administrateurs sont automatiquement des créateurs de sessions).</li>
        <li> Modification de la liste des éditeurs de plan de bâtiment
            (les administrateurs sont automatiquement des éditeurs de plan).</li>
        <li> Durée de vie des tickets de session.</li>
        <li> Liste des noms des machines par salle, une ligne par salle :<br>
            <tt>Bâtiment,Salle Machine1 Machine2 Machine3...</tt>
        </li>
        <li> Liste des sessions désactivées par leurs administrateurs afin
            de les cacher temporairement aux étudiants.
        </li>
        <li> Expression régulière permettant d'identifier les logins étudiants.</li>
        <li> Traduction des différents messages affichés (totalement incomplet).</li>
        <li> Une zone permettant de saisir du code Python qui sera
            évalué sur le serveur afin de trouver et corriger des problèmes
            sans avoir besoin de le redémarrer.
        </li>
    </ul>
    <p>
        Cette configuration est dans le fichier <tt>c5.cf</tt>
    </p>

    <h3>Administrateur C5, Administrateur session, Correcteur et surveillants.</h3>
    <img class="screenshot" src="screen-admin.svg">
    <p>
        Ces personnes voient la liste des sessions les concernant
        classées dans différents blocs :
    </p>
    <table>
        <tr>
            <th colspan="2"> État </th>
            <th> Proposée à </th>
            <th> Utilisable par</th>
        </tr>
        <tr>
            <td colspan="2"> <b>Brouillon</b><br><i>Draft</i> </td>
            <td> Créateur+admins</td>
            <td> Créateur+admins</td>
        </tr>
        <tr>
            <td rowspan="3"> <b>Prête</b><br><i>Ready</i> </td>
            <td> Avant </td>
            <td> Tout le monde</td>
            <td> Créateur+admins+correcteurs</td>
        </tr>
        <tr>
            <td> Pendant </td>
            <td> Tout le monde</td>
            <td> Tout le monde</td>
        </tr>
        <tr>
            <td> Après </td>
            <td> Tous sauf étudiants<br>Le surveillant doit pouvoir rouvrir</td>
            <td> Créateur+admins+correcteurs</td>
        </tr>
        <tr>
            <td colspan="2"> <b>Correction</b><br><i>Grade</i> </td>
            <td> Créateur+admins+correcteurs</td>
            <td> Créateur+admins+correcteurs</td>
        </tr>
        <tr>
            <td colspan="2"> <b>Terminée</b><br><i>Done</i> </td>
            <td> Créateur+admins+correcteurs<br>
                Étudiants s'il y a un retour.</td>
            <td> Créateur+admins+correcteurs<br>
                Étudiants s'il y a un retour.
            </td>
        </tr>
        <tr>
            <td colspan="2"> <b>Archivée</b><br><i>Archive</i> </td>
            <td> Créateur+admins</td>
            <td> Créateur+admins</td>
        </tr>
    </table>

    <p>
        Chaque bloc contient les informations suivantes :
    </p>
    <ul>
        <li> Nom de la session.</li>
        <li> Compilateur utilisé.</li>
        <li> Nombre d'étudiants qui se sont connectés sur la session.</li>
        <li> Nombre d'étudiants attendant dans la salle d'attente de l'examen.</li>
        <li> Nombre d'étudiants ayant travaillé il y a moins de 5 minutes.</li>
        <li> Nombre d'étudiants que j'ai placé sur le plan et que je surveille.</li>
        <li> Date de début de session (si vide depuis toujours).</li>
        <li> Date de fin de session (si vide à tout jamais).</li>
        <li> Options de session :
            <ul>
                <li>🎨 coloration syntaxique</li>
                <li>✂ copier/coller autorisé</li>
                <li>🚦 mode examen (placement requis)</li>
                <li>S accès séquenciel des questions</li>
                <li>🔓 sauver débloque la question suivante</li>
                <li>IP autorise les changements d'IP.</li>
            </ul>
        </li>
        <li> <tt class="link">Edit</tt> permet de configurer la session si on est administrateur.</li>
        <li> <tt class="link">Try</tt> permet de tester la session (si elle n'est pas ouverte, il faut être
            administrateur de la session).
        </li>
        <li> <tt class="link">Place</tt> permet de gérer la salle d'attente, placer les étudiants sur le plan
            et d'accéder à leur travail pour le corriger.
        </li>
        <li> «Creator» la personne qui a créé la session.</li>
        <li> «Admins» les personnes qui peuvent modifier la session (en plus du créateur).</li>
        <li> «Graders» les personnes qui peuvent corriger les copies
            et tester l'examen avant son ouverture la session (en plus des admins).</li>
        <li> «Proctors» les personnes pouvant surveiller l'examen (en plus des correcteurs).</li>
    </ul>
    <p>
        Au desssous du tableau on trouve des actions dépendant
        de la personne connectée.
    </p>
    <ul>
        <li> La possibilité de désactiver un ensemble de sessions.
            Par exemple pour que les étudiants ne puissent pas aller
            sur des sessions d'exercices pendant un examen.
        </li>
        <li> La possibilité de changer le paramètrage d'un ensemble de sessions
            afin de ne pas devoir faire la même action sur plein de sessions.
        </li>
        <li> Ajout d'une nouvelle session.
            Vous cliquez sur le compilateur puis choisissez le fichier Python
            définissant la question.
            Il est conseillé de préfixer le nom du fichier Python
            par le code de l'UE.
        </li>
        <li> Éditer le plan d'un bâtiment directement sur la page web.</li>
    </ul>
    <p>
        Cette configuration est enregistrée sous le nom <tt>COMPILE_*/nom_sujet.cf</tt>
        le sujet est dans <tt>COMPILE_*/nom_sujet.py</tt> et les logs des étudiants
        dans le répertoire <tt>COMPILE_*/nom_sujet</tt>.
    </p>

    <h2>Les autres pages de C5.</h2>

    <h3>Administrateur : éditeur de session.</h3>
    <img class="screenshot" src="screen-editor.svg">
    <p>
        Il permet de définir tous les paramètres de la session en cours.
        Les informations concernant la configuration sont sauvegardés
        dès que l'on sort du champ qui a été modifié.
        Un retour sur l'enregistrement est affiché en haut,
        si valeur reste rouge c'est qu'elle n'a pas pu être enregistrée.
    </p>
    <ul>
        <li> Le premier onglet «Config» permet de modifier les attributs
            définis précédemment dans l'immense table.</li>
        <li> Le deuxième onglet «Access» défini les droits d'accès.
            <ul>
                <li> Le créateur de la session (non modifiable).</li>
                <li> Les administrateurs pouvant modifier cette page.</li>
                <li> Les personnes pouvant noter la session et la tester à l'avance.</li>
                <li> Les surveillants qui placent les étudiants.</li>
                <li> La liste des étudiants attendus qui verront
                    la session en gras dans la liste.
                    On peut cacher la session aux étudiants non attendus.
                </li>
                <li>
                    Les étudiants avec un tiers temps automatique.
                </li>
            </ul>
        </li>
        <li> L'onglet «Source» permet d'éditer les question en interactif.
            Mais les étudiants devront recharger la page s'ils ont commencés.
        </li>
        <li> L'onglet «Try» permet d'essayer la session.
        </li>
        <li>
            L'onglet «Place» permet de placer les étudiants.
        </li>
        <li>
            L'onglet «Chat» permet de lister tous les messages
            de surveillance de la session.
        </li>
        <li>
            L'onglet «Student» permet de lister les étudiants
            qui se sont connectés sur la session.
        </li>
        <li>
            L'onglet «Grading» permet de définir
            Le barème de notation de la session en texte libre.
            Ainsi que la note maximum obtenable.
            Le barème est sur l'ensemble des questions.
            Ne rien changer dans le barème une fois que la correction a commencé
            à part les typos.
        </li>
        <li>
            L'onglet «Export/Stat» analyse le travail de l'ensemble
            des étudiants et des correcteurs afin d'en tirer des informations.
        </li>
    </ul>
    <p>
        A droite des onglets on trouve un menu permettant
        de faire des actions.
    </p>

    <h3>Administrateur : onglet «Export/Stat».</h3>
    <img class="screenshot" src="screen-course.svg">
    <p>
        Les administrateurs de session peuvent regarder le détail de la session.
        Pour chaque étudiant on a le détail et le résumé de toute
        la colonne sur la dernière ligne (importable directement dans TOMUSS).
    </p>
    <ul>
        <li> L'identifiant de l'étudiant.
            Si l'on clique dessus on arrive sur le plan du bâtiment
            avec un zoom sur l'étudiant.
        </li>
        <li>
            Le temps supplémentaire en minutes accordé par le surveillant.
        </li>
        <li>
            Le status de l'étudiant :
            <ul>
                <li> En salle d'attente, il ne peut pas encore commencer.</li>
                <li> En attente de début d'examen.</li>
                <li> L'examen est en cours.</li>
                <li> L'examen est fini sauf pour les tiers-temps.</li>
                <li> L'examen est terminé.</li>
            </ul>
        </li>
        <li> Les questions réussies et leur nombre.
            En bas le code source des questions réussies ou des questions sauvegardées.
        </li>
        <li>
            La note de la copie.
        </li>
        <li>
            La ou les personnes ayant corrigé la copie.
        </li>
        <li>
            Le temps total pour faire l'examen en ajoutant la durée de chaque question
            et en ne comptant pas les arrêts de travail.
        </li>
        <li>
            Nombre de touches frappées, de clics de souris, de 'copié' de texte,
            de copiés interdits, de 'collé' (ou glissé) de texte, de collés interdits.
        </li>
        <li>
            Blur : nombre de fois que l'étudiant est aller voir dans une autre fenêtre.
            Ce nombre est utilisé sur le plan de salle pour indiquer qu'il y a un problème.
        </li>
        <li>
            Blur time : le temps en secondes avec le focus perdu.
        </li>
        <li>
            Un graphique avec un rectangle par question dont la taille
            est proportionnelle au temps passé pour répondre à la question.
        </li>
        <li>
            Des fichiers de log de l'étudiant permettant de savoir
            très exactement tout ce qu'il a fait.
        </li>
    </ul>
    <p>
        Au dessous de la table, les listes des étudiants qui n'ont pas
        été corrigés ou bien avec une correction incomplète.
        Les listes sont aussi affichées en triant par correcteur.
    </p>

    <h3>Surveillant : placement des étudiants.</h3>
    <img class="screenshot" src="screen-checkpoint.svg">
    <p>
        Le surveillant voit la liste des sessions qu'il doit surveiller,
        Il clique alors sur <tt class="link">Place</tt> pour gérer la salle d'attente.
        Les enseignants peuvent tester la session même s'ils n'ont pas
        été placés sur le plan.
    </p>
    <p>
        La salle d'attente affiche un menu à gauche de l'écran :
    </p>
    <ul>
        <li> Un gyrophare 🚨 permet d'afficher un message sur tous
            les plans des surveillants.
            Les messages sont affichés en bas à droite du plan.
            Ils sont masquable avec le bouton ×.
        </li>
        <li> La loupe 🔍 permet de zoomer sur l'étudiants dont on donne
            le <b>début</b> du nom, prénom ou numéro d'étudiant.
            Si plusieurs sont possibles, un menu est proposé.
        </li>
        <li> Liste des plans des bâtiments.
            Le bâtiment initial affiché peut être choisi par l'administrateur
            de la session.
        </li>
        <li> « Seulement les salles » permet de n'afficher que les
            salles qui contiennent des étudiants que l'on a placé.
            C'est utile pour retrouver ses étudiants ou bien si l'on
            surveilles 2 salles éloignées car elles seront rapprochées
            l'une de l'autre.
            Cette fonctionnalité peut être (dés)activée par
            l'administrateur de la session.
        </li>
        <li> « Mettre en évidence les logins » permet d'afficher en au de
            la liste les étudiants dont le login est indiqué dans la liste.
            Cette fonctionnalité peut être (dés)activée par
            l'administrateur de la session.
        </li>
        <li> Liste des étudiants qui n'ont pas encore été acceptés pour commencer l'examen.
            Il faut les faire glisser sur le sujet Ⓐ ou Ⓑ ou bien sur une chaise.
            Si le lien entre les noms des machines et les salles a été fait dans
            la configuration alors seul les étudiants présents dans les
            salles affichées complètement (pas à moitié) sur l'écran
            seront indiqués dans la liste des étudiants à placer.
            Cette liste est mise à jour en fin de déplacement,
            pas pendant que le plan bouge sur l'écran.
        </li>
        <li>
            Le haut du plan contient la légende et comment l'utiliser.
            Cette longue légende n'est pas présente sur la copie d'écran.
        </li>
    </ul>
    <p>
    <p>
        Les ordinateurs en rouge sont ceux avec un problème,
        les surveillants peuvent déclarer les problèmes
        et on peut aussi indiquer que le poste a été réparé.
    </p>
    </p>
    <p>
        Concernant l'étudiant placé sur le plan :
    </p>
    <ul>
        <li>
            Les étudiants qui changent de fenêtres pendant l'examen sont
            mis en évidence sur cette vue avec un barre de progression rouge
            indiquant le nombre de changements de fenêtres.
            Au dessus de cette barre il est indiqué le nombre de
            secondes pendant lesquelles le focus a été perdu.
        </li>
        <li>
            Au dessous de la barre de progression rouge il y a un barre verte
            indiquant le nombre de questions réussies dans la suite d'exercices.
        </li>
        <li>
            Si l'étudiant a été noté, sa note est indiquée ainsi
            que le nombre d'éléments notés.
            Le symbole <span style="font-family:emoji">👁</span> indique les informations dont la diffusion
            est autorisées par le correcteur :
            commentaires, notes et détail des notes.
        </li>
        <li>
            La couleur de l'étudiant indique :
            <ul>
                <li> Gris : surveillé par un autre enseignant.</li>
                <li> Noir : travaille avec vous.</li>
                <li> Bleu : n'a rien fait depuis 5 minutes.</li>
                <li> Vert : examen clôturé</li>
                <li> Rouge : Placé dans la mauvaise salle.</li>
            </ul>
        </li>
    </ul>

    <h3>Surveillant : administrer la session, regarder le code.</h3>
    <img src="screen-spy.svg" class="screenshot">
    <p>
        Quand on clique sur un étudiant on peut accéder à la dernière
        version de son travail.
        On peut utiliser un ascenseur temporel pour voir l'évolution
        de ce qu'il a fait.
        Le déplacement dans le temps est instantané.
        Les zones rouges indiquent les moments où le focus a été perdu.
    </p>
    <ul>
        <li> Traits noirs : les compilations.
        <li> Traits bleus : les sauvegardes faites par l'étudiant.
        <li> Traits verts : les questions réussies (avec le numéro de la question).
    </ul>
    <p>
        Le code source s'affiche alors au dessous de la barre d'ascenseur.
    </p>
    <p>
        Le bouton «Clôturer examen» doit être utilisé quand il quitte
        la salle afin qu'il ne puisse pas continuer l'examen à l'extérieur.
        L'étudiant a un bouton «Terminer Examen» sur l'éditeur de source pour terminer l'examen.
        Une fois l'examen clôturé, le bouton devient «Rouvrir l'examen».
    </p>
    <p>
        On peut indiquer le temps bonus total pour que l'étudiant
        termine l'examen.
        C'est utile si l'étudiant arrive en retard ou bien s'il y a
        un problème technique pendant l'examen.
        Les tiers-temps ont automatiquement du temps en plus
        qui n'apparaît pas ici.
    </p>
    <p>
        Ont ferme la popup en cliquant sur × ou bien en appuyant
        sur la touche escape.
    </p>
    <p>
        Le bouton «Noter l'étudiant» permet de noter le source de l'étudiant :
    </p>
    <ul>
        <li> Le source ayant passé les tests de régression.</li>
        <li> Le source sauvegardé par l'étudiant.</li>
        <li> Le source compilé avec <tt>compile_remote</tt>.</li>
        <li> Si aucun des précédents : le source qui était sur
            l'écran 5 secondes avant la fin de l'examen.
        </li>
    </ul>

    <h3>Correcteur : notes, commentaires et retours.</h3>
    <img src="screen-grade.svg" class="screenshot">
    <p>
        Il clique sur l'étudiant placé et arrive sur l'éditeur C5
        avec le barème de notation affiché.
        Il n'a plus qu'à cliquer pour mettre les notes qui
        sont immédiatement enregistrées.
        Si 2 enseignants notent en même temps le même étudiant,
        ils perdent une seule note dans le pire cas.
    </p>
    <p>
        Le correcteur peut ajouter des commentaires aux lignes
        et envoyer un mail à l'étudiant avec son programme commenté.
    </p>
    <p>
        Le correcteur peut essayer le code de l'étudiant pour le tester
        et même le modifier temporairement pour voir ce que cela donne.
    </p>
    <p>
        Le correcteur peut décider de corriger autre chose que la
        dernière version sauvegardée par l'étudiant :
    </p>
    <ul>
        <li> La dernière compilation faite, mais seulement
            si c'est un session avec le compilateur REMOTE.</li>
        <li> La version qui a passé les tests de régression la première fois,
            sans les améliorations que l'étudiant aurait pu ajouter après.
        </li>
        <li> La sauvegarde de dernière seconde qui est faite automatiquement
            par C5 10 secondes avant la fin de l'examen si l'étudiant
            n'a pas sauvegardé lui-même la minute précédente.
        </li>
    </ul>
    <p>
        Une fois la correction faite, il indique ce qu'il veut diffuser à l'étudiant.
    </p>
    <ul>
        <li> Rien du tout.</li>
        <li> Le code source de l'étudiant. C'est le choix par défaut.</li>
        <li> + Les commentaires saisis.</li>
        <li> + La note globale.</li>
        <li> + Le détail du barème et des points.</li>
    </ul>
    <p>
        Le gestionnaire de session indique la même chose de son coté
        pour l'ensemble des étudiants et ce qui est appliqué est
        ce sur quoi ils sont d'accord, donc le minimum des 2 quantités
        d'information.
    </p>
    <p>
        Sur la plan, un <span style="font-family:emoji">👁</span> indique les informations dont la diffusion
        est autorisé par le correcteur.
    </p>
    <p>
        <span style="font-family:emoji">✉</span> permet d'ouvrir la messagerie
        afin de composer un message pour l'étudiant.
        Le corps du message indique que l'étudiant peut
        trouver la correction sur C5, avec un lien direct sur celle-ci.
    </p>

    <h2>Guides rapides d'utilisation.</h2>
    <p>
        Pour les différents intervenants.
    </p>

    <h3>Le responsable de la session.</h3>

    <p>
        Pour lancer une session d'examen :
    </p>
    <ul>
        <li> Déposer le fichier décrivant la session.</li>
        <li> Indiquer les heures de début et fin.</li>
        <li> Indiquer qu'il y a une salle d'attente (les étudiants devront être placés).</li>
        <li> Indiquer la liste des tiers-temps.</li>
        <li> Indiquer la liste des surveillants.</li>
    </ul>
    <p>
        Après la session d'examen :
    </p>
    <ul>
        <li> Indiquer la liste des correcteurs.</li>
        <li> Demander aux correcteurs de corriger.
            Si les correcteurs ne corrigent pas par salle,
            on peut envoyer une liste d'URL pour
            corriger chacun de leurs étudiants :
            <tt>[adresse_C5]/grade/[nom-session]/[numéro-étudiant]</tt>
        </li>
        <li>
            Cliquer sur <tt class="button">See student results</tt>
            pour voir l'avancement des corrections,
            exporter tous les codes sources ou toutes les notes des étudiants.
        </li>
    </ul>

    <h3>Le surveillant.</h3>
    <p>
        Il est recommander d'envoyer un mail aux surveillants,
        pour leur expliquer leur travail.
    </p>
    <ul>
        <li> Aller sur C5.</li>
        <li> Cliquer sur <tt class="link">Place</tt> de la session d'examen.</li>
        <li> Une fois sur le plan du bon bâtiment :
            cliquer sur un espace vide
            dans votre salle pour zoomer dessus.
            La molette et le glisser du plan fonctionnent aussi.
        </li>
        <li> Dire aux étudiants qui arrivent d'aller sur C5
            et de cliquer sur le sujet d'examen.
        </li>
        <li>
            Le nom de l'étudiant est en gros sur leur écran,
            Faire glisser l'étudiant sur Ⓐ ou Ⓑ.
        </li>
        <li>
            Dire à l'étudiant de recharger la page,
            il y aura un compte à rebour à la fin duquel
            la page se rechargera automatiquement.
        </li>
        <li>
            Si l'étudiant n'est pas en plein écran il y a un gros encart rouge
            lui disant de passer en plein écran.
        </li>
        <li>
            Laisser le plan ouvert : sur le nom de l'étudiant une barre rouge
            va grandir à chaque fois que l'étudiant perd le focus.
            Surveiller de près ces étudiants.
        </li>
        <li>
            Dire aux étudiants de sauvegarder chaque fois qu'ils
            ont une version qui fonctionne ou franchi une étape.
            Il y a souvent des prises électriques mal enfoncées.
            C'est la dernière sauvegarde qui sera notée.
        </li>
        <li>
            Cliquer sur le début du nom d'étudiant, pour :
            <ul>
                <li>«Clôturer examen» si l'étudiant est parti avant la fin
                    sans terminer l'examen lui même.</li>
                <li>«Rouvrir l'examen» en cas de clôture par erreur.</li>
                <li>Ajouter des minutes de temps bonus.
                    Pour les tiers temps cela a déjà été fait,
                    donc ne pas donner plus de temps.</li>
                <li>Regarder l'évolution de son code source dans le temps.</li>
            </ul>
        <li>Le gyrophare 🚨 permet de faire afficher un message sur
            les plans de tous les surveillants.</li>
    </ul>

    <h3>Le correcteur.</h3>
    <p>
        On suppose que la liste des correcteurs ainsi que le barème
        ont été indiqués dans le paramétrage de la session.
    </p>
    <ul>
        <li>
            Allez sur C5 et cliquer sur <tt class="link">Place</tt>
            de la bonne session
            pour accèder à la salle contenant les étudiants à noter.
        </li>
        <li>
            Noter un unique étudiant en cliquant sur le début de son nom
            puis en cliquant sur le bouton <tt class="button">Noter</tt>.
        </li>
        <li>
            Ou bien ouvrir un onglet de correction pour
            chacun des étudiants de la salle en cliquant sur 📝.
            Il faut autoriser l'affichage des popups.
        </li>
        <li>
            Une fois sur la page de correction, cocher les différents éléments du barème
            et saisir les commentaires dans les cases à droite du code source.
        </li>
        <li>
            Quand le barème est complètement rempli «Retour étudiant via C5» passe en vert.
            Choisissez ce que vous voulez faire afficher à l'étudiant.
        </li>
        <li>
            L'enveloppe à gauche de son nom permet d'ouvrir la messagerie
            pour le prévenir si nécessaire.
        </li>
    </ul>

    <h2>Installation et administration de C5.</h2>

    <h3>Installer C5.</h3>
    <p>
        Lancez ces commandes (Ubuntu) :
    </p>
    <pre>sudo apt update
sudo apt install python3-websockets python3-aiohttp astyle curl npm racket zip # nginx certbot
git clone https://github.com/texcoffier/C5.git
cd C5
make</pre>
    <p>
        Si tout s'est bien passé, une page web s'ouvre sur l'interface d'administration.
        Vous pouvez alors cliquer sur «Session» pour choisir une session.
    </p>
    <h3>Configuration et gestion C5.</h3>
    <p>
        La configuration de C5 est un script exécutable, vous pouvez en créer
        autant que vous voulez.
        Il est conseillé de faire une configuration pour le développement local
        et une configuration pour la production.
        <b>Dans tous les cas vous lancez les commandes sur votre machine de développement,
            elle seront éventuellement exécutées via SSH sur le serveur de production.</b>
        On va supposer que vous appeliez votre configuration <tt>c5</tt>,
        voici ce que vous devez faire :
    </p>
    <ul>
        <li> <tt>cp 127 c5 ; chmod a+x c5</tt> faites une copie de la configuration de base.</li>
        <li> Vous éditez le script <tt>c5</tt> pour mettre les bonnes valeurs.
            Pour avoir un peu d'aide, lancez simplement : <tt>./c5</tt>
        </li>
        <li> <tt>../c5 launcher</tt> génère 'launcher', nécessaire
            quand <tt>launcher.c</tt> change, lance un <tt>sudo</tt>
            pour le recréer car le bit SUID est nécessaire.</li>
        <li> <tt>./c5 start</tt> pour lancer les serveurs locaux ou bien distants,
            les logs sont dans <tt>http_server.log</tt>, <tt>compile_server.log</tt>
            et <tt>infos_server.log</tt> sur la machine qui fait tourner les serveurs.</li>
        <li> <tt>./c5 open JS=introduction</tt> pour ouvrir <tt>COMPILE_JS/introduction.js</tt>
            dans le navigateur web.</li>
        <li> <tt>./c5 compile</tt> pour recompiler tout ce qui est nécessaire
            quand vous avez modifié un cours.
            Regardez bien s'il y a des erreurs de traduction.</li>
    </ul>
    <p>
        Plus rarement utilisé :
    </p>
    <ul>
        <li> <tt>./c5 os</tt> installation paquets nécessaires sur la machine.
        <li> <tt>./c5 SSL-LE</tt> génération du certificat pour NGINX.
            Cela ne configure pas NGINX.</li>
        <li> <tt>./c5 c5 ; ./c5 restart</tt> Mise à jour d'une nouvelle version à partir de GitHub</li>
        <li> <tt>./c5 cp ; ./c5 restart</tt> Mise à jour d'une nouvelle version à partir des sources locaux</li>
    </ul>

    <h3>Configuration NGINX.</h3>
    <p>
        Il faut remplacer /WebSocket/, 4201, 4202 par les bonnes valeurs.
    </p>
    <pre>
server {
    listen 443 ssl;
    server_name c5.univ-lyon1.fr;
    ssl_certificate /etc/letsencrypt/live/c5.univ-lyon1.fr/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/c5.univ-lyon1.fr/privkey.pem; # managed by Certbot
    location ~ /WebSocket/ {
        rewrite ^/WebSocket/(.*) /$1 break;
        proxy_pass http://127.0.0.1:4202;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection Upgrade;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    location ~ {
        proxy_pass http://127.0.0.1:4201;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
  }
            </pre>

    <h2>Développement de C5.</h2>

    <h3>Organisation des sources.</h3>
    <p>
        Légende :
    </p>
    <ul>
        <li class="compilateur"> Les compilateurs (coté navigateur web). </li>
        <li class="cours"> Les cours (coté navigateur web).</li>
        <li class="js"> Traduit en JavaScript pour être exécuté coté navigateur web.</li>
        <li class="executable"> Les programmes.</li>
        <li class="serveur"> Les serveurs.</li>
    </ul>
    <p>
        Ordre alphabétique des fichiers.
    </p>
    <table>
        <tr>
            <td>127
            <td>Administre C5 sur la machine locale (même paramètres que utilities.py).
        </tr>
        <tr>
            <td>BUILDINGS/Ariane<br>
                BUILDINGS/Grignard<br>
                BUILDINGS/Nautibus<br>
                BUILDINGS/empty
            <td> Les plans des bâtiments.
                Empty est pour la salle privée dans enseignants.
        </tr>
        <tr class="cours">
            <td>COMPILE_CPP/test.py
            <td>Exemple d'utilisation de compile_cpp et de récupération
                des informations concernant la place de l'étudiant dans la salle.
        </tr>
        <tr class="cours">
            <td>COMPILE_JS/example.py
            <td>Un exemple minimaliste de cours pour commencer.
        </tr>
        <tr class="cours">
            <td>COMPILE_JS/introduction.py
            <td>Mini cours de JavaScript.
        </tr>
        <tr class="cours">
            <td>COMPILE_LISP/conway.py
            <td>Un exemple de programme LISP.
        </tr>
        <tr class="">
            <td>COMPILE_PYTHON/editor.py
            <td>C'est l'éditeur interactif de sujet.
                Les sujets étant écrits en Python,
                il est nécessaire de les éditer et tester
                dans l'environnement Python.
        </tr>
        <tr class="cours">
            <td>COMPILE_PYTHON/introduction.py
            <td>Un mini cours Python.
        </tr>
        <tr class="cours">
            <td>COMPILE_REMOTE/errors.py
            <td>Une série d'exercices dans lesquels l'étudiant doit corriger des erreurs de syntaxe.
        </tr>
        <tr class="cours">
            <td>COMPILE_REMOTE/files.py
            <td>Exemple de test sur la lecture et l'écriture de fichiers.
        </tr>
        <tr class="">
            <td>COMPILE_REMOTE/grapic-chien.png
            <td>Média utilisé dans les exemples Grapic.
        </tr>
        <tr class="cours">
            <td>COMPILE_REMOTE/grapic.py
            <td>Les exemples Grapic pour faire des applications graphiques.
        </tr>
        <tr class="cours">
            <td>COMPILE_REMOTE/racket.py
            <td>Un exemple utilisant l'interpréteur Racket sur le serveur.
        </tr>
        <tr class="cours">
            <td>COMPILE_REMOTE/test.py
            <td>Exemple d'utilisation de compile_remote.
        </tr>
        <tr class="cours">
            <td>COMPILE_SQL/test.py
            <td>Exemple d'utilisation de compile_sql pour tester s'il fonctionne.
        </tr>
        <tr class="cours">
            <td>COMPILE_TEXT/demo.py
            <td>Exemple d'utilisation de compile_text pour la saisie de texte libre.
        </tr>
        <tr>
            <td>DOCUMENTATION/c5.svg
            <td>Lien vers «c5.svg»
        </tr>
        <tr class="executable">
            <td>DOCUMENTATION/create_video
            <td>Script shell à éditer pour créer des vidéos
        </tr>
        <tr>
            <td>DOCUMENTATION/favicon.ico
            <td>Lien vers «favicon.svg»
        </tr>
        <tr>
            <td><a href="flyer.html">DOCUMENTATION/flyer.html</a>
            <td>Un diaporama pour une présentation orale de C5.
        </tr>
        <tr>
            <td>DOCUMENTATION/index.html
            <td>Cette page d'explication.
        </tr>
        <tr>
            <td>DOCUMENTATION/<br>
                screen-admin.(png|svg)<br>
                screen-checkpoint.(png|svg)<br>
                screen-course.(png|svg)<br>
                screen-editor.(png|svg)<br>
                screen-grading.(png|svg)<br>
                screen-python.(png|svg)<br>
                screen-root.(png|svg)<br>
                screen-session-editor.(png|svg)<br>
                screen-src.png<br>
                screen-student.(png|svg)<br>
                screen-time-travel.(png|svg)
            <td>Graphiques utilisées par la documentation.
        </tr>
        <tr>
            <td>
                DOCUMENTATION/<br>
                tuto_student.webm<br>
                tuto_teacher.webm
            <td>
                Tuto vidéo complètement obsolette.
        </tr>
        <tr class="">
            <td>Grapic.h
            <td>Fourni la bilbiothèque Grapic à C5
        </tr>
        <tr>
            <td>Makefile
            <td>Utilisé par <tt>utilities.py</tt>, pas directement.
        </tr>
        <tr>
            <td>README.rst
            <td>Page d'accueil pour GitHub.
        </tr>
        <tr class="js">
            <td>adm_course.py
            <td>Page d'accueil du cours avec les statistiques étudiants.
        </tr>
        <tr class="js">
            <td>adm_root.py
            <td>Page d'accueil des administrateurs C5.
        </tr>
        <tr class="js">
            <td>adm_session.css<br>
                adm_session.py
            <td>Éditeur de session.
        </tr>
        <tr>
            <td>c5.svg
            <td>Logo.
        </tr>
        <tr class="js">
            <td>ccccc.css<br>ccccc.py
            <td>Interface d'étudiant pour travailler.
        </tr>
        <tr class="js">
            <td>checkpoint.py
            <td>Gestion de la salle d'attente et placement des étudiants sur le plan.
        </tr>
        <tr class="executable">
            <td>clean.py
            <td>Script effaçant toutes les traces laissées par les tests de régression.
        </tr>
        <tr class="executable">
            <td>comments.py
            <td>Calcule les statistiques sur les commentaires faits par les correcteurs.
        </tr>
        <tr class="js">
            <td>compatibility.py
            <td>Utilitaires pour ajouter des fonctions manquantes à JavaScript.
                Et aussi des fonctions utiles pour plusieurs pages.
        </tr>
        <tr class="compilateur">
            <td>compile.py
            <td>La classe racine de tous les compilateurs.
        </tr>
        <tr class="compilateur">
            <td>compile_cpp.py
            <td>Compilateur incomplet C++ en javascript.
        </tr>
        <tr class="compilateur">
            <td>compile_js.py
            <td>Interpréteur JavaScript.
        </tr>
        <tr class="compilateur">
            <td>compile_lisp.py
            <td>Interpréteur LISP.
        </tr>
        <tr class="compilateur">
            <td>compile_python.py
            <td>Interpréteur Python (brython).
        </tr>
        <tr class="serveur">
            <td>compile_racket.rkt
            <td>Programme LISP interprétant dans une sandbox le fichier
                LISP dont le nom est envoyé sur l'entrée standard.
                Ce programme est lancé une fois par session car Racket
                prend du temps pour démarrer.
        </tr>
        <tr class="compilateur">
            <td>compile_remote.py
            <td>Contacte compile_server.py pour compiler et exécuter.
        </tr>
        <tr class="serveur">
            <td>compile_server.py
            <td>Serveur de compilation et exécution de C++ avec différents
                compilateur et options possibles.
        </tr>
        <tr class="compilateur">
            <td>compile_sql.py
            <td>Interpréteur SQL (alasql).
        </tr>
        <tr class="compilateur">
            <td>compile_text.py
            <td>Compilateur ne faisant rien pour réponses en texte libre
        </tr>
        <tr class="serveur">
            <td>dns_server.py
            <td>Un filtre (stdin/stdout) calculant le nom de la machine à
                partir de son adresse IP.
        </tr>
        <tr>
            <td>favicon.ico
            <td>L'icône des pages web, calculée à partir de <tt>c5.svg</tt>.
        </tr>
        <tr class="js">
            <td>home.py
            <td>Page d'accueil des étudiants.
        </tr>
        <tr class="serveur">
            <td>http_server.py
            <td>Le serveur web C5 pouvant fonctionner seul ou derrière
                un server web classique.
        </tr>
        <tr class="serveur">
            <td>infos_server.py
            <td>Un filtre (stdin/stdout) calculant le nom et prénom à partir du login.
        </tr>
        <tr class="serveur">
            <td>killer<br>
                killer.c
            <td>Démons tuant les hiérarchies de processus prenant
                plus d'une seconde CPU et se trouvant dans <tt>/sys/fs/cgroup/C5_*</tt>
        </tr>
        <tr class="executable">
            <td>launcher<br>
                launcher.c
            <td>Ce programme possède le SUID root ce qui lui permet :
                <ul>
                    <li> De créer le contrôle groupe utilisé par <tt>killer.py</tt>.
                    <li> De lancer le processus avec un UID liée à la session.
                    <li> De limiter les ressources utilisées par le processus.
                </ul>
        </tr>
        <tr class="executable">
            <td>load_testing.py
            <td>Un simulateur de charge pour voir combien le système supporte d'étudiants.
                Difficilement utilisable car il faut le modifier pour indiquer un bon ticket de session.
        </tr>
        <tr class="js">
            <td>question.py
            <td>La classe permettant de définir les questions.
        </tr>
        <tr class="">
            <td>question_after.py<br>
                question_before.py
            <td> Utilitaire permettant de générer le fichier <tt>.json</tt>
                contenant les titres des questions des différentes sessions.
                C'est nécessaire pour faire les export ZIP et GIT.
        </tr>
        <tr class="executable">
            <td>tests.py
            <td>Tests de régression (ne teste pas la salle d'attente).
        </tr>
        <tr class="executable">
            <td>utilities.py
            <td>Classes et fonctions nécessaires pour les serveurs,
                mais c'est aussi le script d'administration du serveur.
                S'il est lancé sans arguments, cela affiche :
                <ul>
                    <li> Les explications pour l'utiliser.</li>
                    <li> La configuration par défaut extraite des variables d'environnement.</li>
                    <li> Les processus serveur en train de tourner.</li>
                </ul>
                Ce script est appelé par le script <tt>127</tt>.
                faites une copie de <tt>127</tt> avec votre propre configuration
                et utiliser-la pour gérer vos serveurs C5.
        </tr>
    </table>

    <h3>Organisation des fichiers générés.</h3>
    <p>
        Les fichiers de configurations se terminent tous par <tt>.cf</tt>
        et contiennent une expression Python :
    </p>
    <ul>
        <li> <tt>c5.cf</tt> configuration globales de C5
            <ul>
                <li> La liste des administrateurs.
                <li> La durée de vie des tickets,
                <li> La liste des noms de machines par salle de TP
                <li> La liste des ordinateurs en panne.
            </ul>
        </li>
        <li> <tt>COMPILE_{JS|CPP|PYTHON|REMOTE|SQL|TEXT|LISP}/nom_sujet.cf</tt> est la configuration d'un cours
            <ul>
                <li> Dates de début et fin.</li>
                <li> Listes des étudiants avec un tiers-temps.</li>
                <li> Copier/coller autorisé ou non.</li>
                <li> Thème highlight.js</li>
                <li> Avec salle d'attente ou non.</li>
                <li> Liste des surveillants.</li>
                <li> Liste des étudiants en salle d'attente et ceux placés.</li>
            </ul>
        </li>
    </ul>
    <p>
        Les fichiers de logs se terminent tous par <tt>.log</tt> :
    </p>
    <ul>
        <li> <tt>http_server.log</tt> toutes les requêtes web reçues.</li>
        <li> <tt>compile_server.log</tt> toutes les demandes de compilation reçues.</li>
        <li> <tt>dns_server.log</tt> toutes les requêtes DNS faites.</li>
        <li> <tt>infos_server.log</tt> toutes les requêtes nom/prénom faites.</li>
        <li> <tt>tests.log</tt> Résumé des tests de régression.</li>
        <li> <tt>COMPILE_{JS|CPP|PYTHON|REMOTE|SQL|TEXT|LISP}/nom_sujet/LOGIN/</tt>
            <ul>
                <li> <tt>http_server.log</tt> toutes les actions de l'étudiant.<br>
                    <b>Ce fichier est précieux, c'est lui qui permet de noter l'étudiant.</b>
                <li> <tt>compile_server.log</tt><br>
                    toutes les compilations/exécutions faites par l'étudiant.</li>
                <li> <tt>grades.log</tt><br>
                    les notes de l'étudiant.</li>
                <li> <tt>comments.log</tt><br>
                    les commentaires sur les codes de l'étudiant.</li>
            </ul>
        </li>
    </ul>
    <p>
        Divers fichiers générés à l'installation ou à l'utilisation :
    </p>
    <ul>
        <li> <tt>TICKETS</tt> les tickets de session avec le nom de la machine et le navigateur web.</li>
        <li> <tt>CACHE.DNS</tt> et <tt>CACHE.LDAP</tt> caches pour accélérer le démarrage.</li>
        <li> <tt>http_server.pid</tt>, <tt>compile_server.pid</tt> PID des serveurs locaux.</li>
        <li> <tt>SSL</tt> certificat généré pour le serveur web local.</li>
        <li> <tt>RapydScript</tt> transpiler Python→JavaScript.</li>
        <li> <tt>xxx-JSCPP.js</tt> compilateur C++ en JavaScript.</li>
        <li> <tt>HIGHLIGHT</tt> coloriage du code source.</li>
        <li> <tt>sandbox</tt> librairie pour filtrer les appels système.</li>
        <li> <tt>node_modules</tt>, <tt>package-lock.json</tt> généré par <tt>npm</tt></li>
        <li> <tt>geckodriver.log</tt> généré par Selenium (tests de régression).</li>
        <li> <tt>xxx-start-c5</tt> script shell lançant C5 avec les mêmes paramètres que
            lors du dernier lancement du serveur.
    </ul>


    <h3>Tests de régression.</h3>
    <p>
        Installer les paquets :
    </p>
    <pre>apt install python3-selenium chromium-chromedriver firefox-geckodriver xnest xvfb</pre>
    <p>
        Lancer les tests :
    </p>
    <ul>
        <li> <tt>./tests.py</tt> : sur l'écran sans jamais s'arrêter.</li>
        <li> <tt>./tests.py hidden</tt> : caché (xvfb).</li>
        <li> <tt>./tests.py FF</tt> : seulement FireFox.</li>
        <li> <tt>./tests.py 1</tt> : une seule fois (sinon ils ne s'arrêtent pas).</li>
        <li> <tt>./tests.py screenshots</tt> : fait des copies d'écrans automatiquement.</li>
    </ul>
    <p>
        Le résumé est dans <tt>tests.log</tt>
    </p>


    <h2>Utilisation de C5 à l'université Lyon 1.</h2>
    <p>
        Les cours qui ont utilisé C5 :
    </p>
    <table>
        <tr>
            <th>Quand</th>
            <th>Quoi</th>
            <th>Année</th>
            <th>Nbr Inscrits</th>
            <th>Utilisation</th>
        </tr>
        <tr>
            <td> 2022-09→2022-12</td>
            <td>
                Initiation Algorithmique et<br>
                Programmation Impérative<br>
                en langage C
            <td> L1
            <td> 585
            <td>
                2 sujets d'examen.<br>
                5 sujets d'annales.<br>
                2 devoirs maison.<br>
                15 sujets de TD.<br>
                11 sujets de TP.
        </tr>
        <tr>
            <td> 2023-01→2023-05<br>
                Pas terminée.</td>
            <td>
                Algorithmique et<br>
                Programmation Récursive<br>
                en LISP
            <td> L1
            <td> 414
            <td>
                ? sujets d'examen.<br>
                ≥8 sujets de TP.
        </tr>
        <tr>
            <td> 2023-02</td>
            <td>
                Programmation concurrente
            <td> L3
            <td> 165
            <td>
                1 sujet d'examen.<br>
                1 sujet d'entraînement.<br>
        </tr>
        <tr>
            <td> 2023-04</td>
            <td>
                Applications en Mathématiques et Informatique
            <td> L1
            <td> 312
            <td>
                1 sujet d'examen.
        </tr>
    </table>

    <p>
        Sur l'ensemble des sessions d'examens,
        voici l'histogramme du nombre de copies
        en fonction du nombre de commentaires faits
        par les correcteurs sur la copie.
        Une grande partie des copies n'ont pas été commentées du tout.
        Ceci a été calculé par <tt>comments.py</tt>.
    </p>
    <style>
        TABLE.histo SPAN {
            background: #8F8;
            display: inline-block
        }
    </style>
    <table class="histo">
        <tr>
            <th>Nombre<br>de com-<br>mentaires
            <th>Nombre de copies
            <th>
        </tr>
        <tr>
            <td>1
            <td><span style="width:27.428571428571427em">24</span>
        </tr>
        <tr>
            <td>2
            <td><span style="width:35.42857142857143em">31</span>
        </tr>
        <tr>
            <td>3
            <td><span style="width:40.0em">35</span>
        </tr>
        <tr>
            <td>4
            <td><span style="width:37.714285714285715em">33</span>
        </tr>
        <tr>
            <td>5
            <td><span style="width:21.714285714285715em">19</span>
        </tr>
        <tr>
            <td>6
            <td><span style="width:17.142857142857142em">15</span>
        </tr>
        <tr>
            <td>7
            <td><span style="width:22.857142857142858em">20</span>
        </tr>
        <tr>
            <td>8
            <td><span style="width:9.142857142857142em">8</span>
        </tr>
        <tr>
            <td>9
            <td><span style="width:11.428571428571429em">10</span>
        </tr>
        <tr>
            <td>10
            <td><span style="width:10.285714285714286em">9</span>
        </tr>
        <tr>
            <td>11
            <td><span style="width:14.857142857142858em">13</span>
        </tr>
        <tr>
            <td>12
            <td><span style="width:6.857142857142857em">6</span>
        </tr>
        <tr>
            <td>13
            <td><span style="width:5.714285714285714em">5</span>
        </tr>
        <tr>
            <td>14
            <td><span style="width:2.2857142857142856em">2</span>
        </tr>
        <tr>
            <td>15
            <td><span style="width:2.2857142857142856em">2</span>
        </tr>
        <tr>
            <td>16
            <td><span style="width:2.2857142857142856em">2</span>
        </tr>
        <tr>
            <td>17
            <td><span style="width:0.0em">0</span>
        </tr>
        <tr>
            <td>18
            <td><span style="width:0.0em">0</span>
        </tr>
        <tr>
            <td>19
            <td><span style="width:0.0em">0</span>
        </tr>
        <tr>
            <td>20
            <td><span style="width:1.1428571428571428em">1</span>
        </tr>
        <tr>
            <td>
            <td>235 étudiants. Moyenne 5.5 commentaires. Médiane 4 commentaires.
        </tr>
    </table>
    <p>
        Les surveillances d'examens sont faites dans des salles de TP
        avec 18 étudiants.
        Les étudiants doivent impérativement travailler sur les ordinateurs
        de l'établissement et non leur ordinateur personnel.
    </p>
    <p>
        Il est impératif que les étudiants aient fait un TP complet
        en utilisant C5 avant le jour de l'examen afin de ne pas
        être dans un environnement qu'ils ne connaissent pas.
    </p>

    <h2>TODO</h2>
    <p>Fonctionnalités manquantes dans l'<b>éditeur</b> :</p>
    <ul>
        <li> Bouton et icones à ajouter pour l'étudiant :
            <ul>
                <li> Choix du thème de coloriage syntaxique.</li>
                <li> Détruire une sauvegarde.</li>
                <li> Complétion avec <tt class="key">Ctrl+Espace</tt></li>
            </ul>
        </li>
        <li> Backoffice :
            <ul>
                <li> Gestion des versions des sources des sujets.
                    Même s'ils sont modifiés par plusieurs personnes.
                </li>
            </ul>
        </li>
        <li> Bugs à corriger :
            <ul>
                <li>
                    Faire en sorte que <tt class="key">Ctrl+Z</tt> fonctionne après le reformatage du code.
                </li>
                <li>
                    Mettre en évidence le bloc plutôt que seulement les parenthèses ?
                </li>
            </ul>
        </li>
        <li> Conseils pour utiliser le clavier plutôt que la souris.</li>
        </li>
        <li>
            Ajouter des modes d'affichage à l'éditeur :
            <ul>
                <li> Édition : le mode classique.</li>
                <li> Retour : affiche le barème de notation à la place des questions,
                    ainsi que les commentaires de l'enseignant si ces informations
                    sont diffusées. Si c'est un enseignant, c'est éditable.</li>
                <li> Correction : affiche la correction mis en parallèle
                    avec le code de l'étudiant.</li>
                <li> Édition sujet : permet d'avoir une unique fenêtre pour
                    modifier le sujet de la session et l'essayer.</li>
                <li> Guide de TP : le code source contient des consignes
                    pour les surveillants de TP avec des exemples de codes.</li>
            </ul>
            Le mode d'édition est indiqué dans l'URL afin de pouvoir
            mettre des lien directs à partir de la page d'accueil de l'étudiant
            quand le mode est disponible.
        </li>
    </ul>
    <p>Fonctionnalités manquantes dans le <b>checkpoint</b> (placement) :</p>
    <ul>
        <li>
            Affiche source étudiant via la carte :
            bascule entre le mode ascenseur temporel et
            les dernières réponses à toutes les questions.
        </li>
        <li>
            ZIP des étudiants d'une salle.
        </li>
        <li>
            Associer par apprentissage les adresses IP aux places sur le plan.
        </li>
        <li>
            Prédéfinir dans le paramétrage de la session la liste
            des étudiants attendus et dans quelles salles ils doivent composer.
        </li>
        <li>
            Écrire en gras les noms des étudiants.
        </li>
        <li>
            Mettre l'adresse mail de l'étudiant dans la popup.
        </li>
    </ul>
    <p>Fonctionnalités manquantes dans la <b>modélisation du sujet</b> :</p>
    <ul>
        <li>
            Mettre au propre l'API.
        </li>
        <li>
            Le sujet doit pouvoir définir dans les options le nombre de sujets qu'il permet.
        </li>
        <li>
            Ajouter une description à la session (dans le code source ?)
            qui sera affichée à l'étudiant et permettra de garder
            des noms de sessions courts.
        </li>
        <li>
            L'éditeur interactif de sujet devrait avoir la colonne
            d'index des questions à gauche.
        </li>
    </ul>
    <p>Dette technique :</p>
    <ul>
        <li>
            Le protocole d'échange avec '\001' n'est pas fiable
            car il ne distingue pas les débuts et fins de message et
            donc rend impossible une lecture du pipe sans jamais une erreur.
        </li>
        <li>
            Faire un seul répertoire par session qui contient .cf .py .js .json
            les logs et les média.
        </li>
    </ul>
    <p>Fonctionnalités manquantes de la <b>page d'accueil</b> :</p>
    <ul>
        <li> Affichage de seulement ses sujets.</li>
    </ul>
    <p>Fonctionnalités manquantes de la <b>page de notation</b> :</p>
    <ul>
        <li> Ajout du barème aux questions (en plus du barème global).</li>
        <li> Déterminer la version du code qui a été corrigée (sans être commentée).
            De manière automatique ou bien explicitement.
        </li>
        <li>
            Afficher en HTML copiable dans un mail le code commenté de l'étudiant.
        </li>
    </ul>

    <p>Page de <b>paramétrage de session</b> :</p>

    <ul>
        <li> Ajouter l'association des étudiants aux salles d'examen ou surveillant ou correcteurs.</li>
        <li> Ajoute un bouton « Reset using COURSE_OPTIONS »</li>
        <li> Option pour désactiver la toute première compilation quand
            la compilation automatique est désactivée.
            C'est complexe à faire.
        </li>
        <li> Liste des média.</li>
        <li> Détruire un média.</li>
        <li> Ajouter une session "partage de média" dont les média sont utilisables
            directement sans indiquer le nom de la session.
        </li>
    </ul>



    <script>
        /* From Olavi Ivask's Weblog */
        function replaceDiacritics(s) {
            if (s.search(/[\300-\377]/) == -1)
                return s;

            var diacritics = [
                /[\300-\306]/g, /[\340-\346]/g, // A, a
                /[\310-\313]/g, /[\350-\353]/g, // E, e
                /[\314-\317]/g, /[\354-\357]/g, // I, i
                /[\322-\330]/g, /[\362-\370]/g, // O, o
                /[\331-\334]/g, /[\371-\374]/g,  // U, u
                /[\321]/g, /[\361]/g, // N, n
                /[\307]/g, /[\347]/g // C, c
            ];

            var chars = ['A', 'a', 'E', 'e', 'I', 'i', 'O', 'o', 'U', 'u', 'N', 'n', 'C', 'c'];

            for (var i = 0; i < diacritics.length; i++) {
                s = s.replace(diacritics[i], chars[i]);
            }
            return s;
        }

        content = [];
        what = {
            'H2': ['<b>', '</b>'],
            'H3': ['    ', '']
        };
        for (element = document.body.firstChild; element; element = element.nextSibling)
            if (what[element.tagName]) {
                i = replaceDiacritics(element.innerText).toLowerCase().replace(/[.?! ]*$/, "").replace(/[^a-zA-Z0-9]/g, '-');
                content.push(
                    what[element.tagName][0]
                    + '<a href="#' + i + '">'
                    + element.innerHTML
                    + what[element.tagName][1]
                    + '</a><br>'
                );
                element.innerHTML = '<a name="' + i + '">' + element.innerHTML + '</a>';
            }
        document.getElementById('toc').innerHTML = content.join('');


    </script>
</body>
